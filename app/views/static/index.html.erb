<div class="flex flex-col-reverse lg:flex-row gap-8 md:gap-12 items-center md:pt-8">
  <div class="lg:basis-[40%] w-full">
    <div class="mb-1 text-2xl font-bold leading-tight tracking-[-0.008em]">
      Prevent your next postmortem.
    </div>
    <div class="mb-4 text-lg md:text-md text-gray-700 tracking-[-0.01em]">
      Fix the root cause early, without lifting a finger.
    </div>

    <%= form_for Conversation.new, url: conversations_path, html: { id: "demo-form" } do |f| %>
      <div class="p-3 rounded-xl bg-gray-50 shadow border border-gray-100">
        <label for="initial_message" class="block text-gray-900 mb-3">
          What's a recent fire your team put out?
        </label>

        <%= text_area_tag :initial_message, "", class: 'block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 border border-gray-200 outline-1 outline-indigo-300 placeholder:text-gray-400 focus:outline-2 focus:outline-indigo-600 sm:text-sm', rows: 3, placeholder: 'e.g., crashed DB because forgot index', tabindex: 1 %>
      </div>

      <div id="terms-container" class="mt-3 text-xs text-gray-500 text-center">
        By submitting, you agree to the <a href="/terms" class="text-blue-500 hover:underline">Terms</a> and <a href="/privacy" class="text-blue-500 hover:underline">Privacy Policy</a>
      </div>

      <div class="text-center mt-6">
        <%= f.submit 'What was the lesson?', class: 'hover:scale-[1.01] transition-transform shadow-md hover:shadow-lg tracking-[0.01em] cursor-pointer rounded-lg px-5 py-2.5 text-lg font-semibold text-white bg-slate-600 hover:bg-slate-700 active:bg-slate-800 transition', tabindex: 3 %>
      </div>
    <% end %>
  </div>

  <div class="lg:basis-[60%] w-full relative">
    <img src="/hero.jpg" class="w-full rounded-lg shadow-md" />
  </div>
</div>

<div class="pb-6 md:pb-0 mt-10 lg:mt-12">
  <div class="text-md leading-relaxed tracking-[0.008em]">
    <div class="text-[17px]">

      <div class="max-w-[90ch]">
        <div class="mb-4">
          I spent 15 years of <%= link_to 'my career', 'https://linkedin.com/in/jacobcomer', target: "_blank", class: "text-sky-700 hover:text-sky-900 hover:font-medium underline underline-offset-8" %> at B2B startups, and hate watching preventable issues snowball into production incidents.
        </div>
        <div class="mb-8">
          <span class="font-semibold">replicate.info</span> helps early-stage engineering teams find their blind spots, and sends personalized learning nudges every week. <div class="block mt-4 md:inline-block md:mt-0">Check in with a curated LLM on Monday, click a few links, learn something impactful, and get back to your sprint work.</div>
        </div>
      </div>
      <div class="mb-8 flex gap-4">
        <% @example_emails.each_with_index do |email, i| %>
          <div class="bg-yellow-50 rounded-xl p-4 md:p-3 text-sm md:text-sm leading-snug md:basis-1/3 shadow border border-yellow-300 md:block <%= i > 0 ? "hidden" : "" %>">
            <div class="text-slate-800 mb-1 font-mono"><span class="font-semibold">From:</span> replicate.info</div>
            <div class="text-slate-800 mb-3 font-mono"><span class="font-semibold">To:</span> <%= email[:to] %></div>
            <div class="text-slate-600">
              <span class="font-medium text-slate-800"><%= email[:subject] %></span><br>
              <%= email[:content] %>
              <div class="mt-2">
                <a href="/" data-example="<%= email[:prompt] %>" class="example-btn text-sky-700 font-medium transition hover:underline hover:underline-offset-8">Learn more...</a>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="max-w-[90ch]">
        <div class="mb-4">
          No accounts to create, or settings to mess with. Everything happens over email. Who wants another app to manage?
        </div>
        <div>
          Managers get reports on growth and early red flags, so you can unblock the team and help them ship faster.
        </div>
      </div>
    </div>
  </div>

  <div class="flex items-center gap-5 justify-end mt-6">
    <div style="padding-top: 4px">
      <img src="/jacob.jpg" style="width: 70px" class="rounded-full mb-2" />
    </div>
    <div>
      <div class="text-md mb-1.5" style="font-family: 'Homemade Apple'">Jacob Comer</div>
      <div class="flex gap-1.5">
        <%= link_to 'https://instagram.com/jacob_comer', target: "_blank" do %>
          <img src="/icons/instagram.png" style="width: 25px" />
        <% end %>
        <%= link_to 'https://linkedin.com/in/jacobcomer', target: "_blank" do %>
          <img src="/icons/linkedin.png" style="width: 25px" />
        <% end %>
        <%= link_to 'https://jacobcomer.medium.com/write-code-faster-in-vim-c564ff9b9f6c', target: "_blank" do %>
          <img src="/icons/medium.png" style="width: 25px" />
        <% end %>
        <%= link_to 'https://www.reddit.com/user/jacob_the_snacob', target: "_blank" do %>
          <img src="/icons/reddit.png" style="width: 25px" />
        <% end %>
        <%= link_to 'mailto:jacob@jacobcomer.com', target: "_blank" do %>
          <img src="/icons/email.png" style="width: 25px" />
        <% end %>
      </div>
    </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("demo-form");

    const exampleButtons = document.querySelectorAll(".example-btn");
    const textarea = document.querySelector("textarea[name='initial_message']");
    const exampleContainer = document.getElementById("example-buttons");

    exampleButtons.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        textarea.value = btn.dataset.example;
        form.submit(); // Submit the form immediately
      });
    });
  });
</script>