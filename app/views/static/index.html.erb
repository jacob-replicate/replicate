<div class="flex flex-col lg:flex-row gap-9 pt-4 md:pt-10">
  <!-- Left Column: Headline + Form -->
  <div class="lg:w-1/2 w-full">
    <h1 class="text-2xl font-semibold tracking-tight mb-2">
      Most outages start earlier than you think.
    </h1>
    <p class="text-gray-800 mb-4 leading-relaxed text-[17px]">
      Weekly emails that help uncover your infra/security blind spots — and helps you think through them with GPT.
    </p>


    <%= form_for Conversation.new, url: conversations_path, html: { id: "demo-form" } do |f| %>
      <div class="rounded-xl border border-neutral-150 bg-neutral-100 p-5 shadow leading-snug">
        <label for="initial_message" class="block font-semibold text-gray-900 leading-snug text-[17px]">
          What did you scramble to fix?
        </label>
        <p class="mt-1 text-[15px] text-gray-600 leading-normal">
          Let's take 5min, and trace the pattern behind it.
        </p>

        <%= text_area_tag :incident, "", class: "mt-4 w-full rounded-md border border-gray-300 bg-white px-4 py-2 text-sm text-gray-900 placeholder:text-gray-400 focus:border-indigo-600 focus:ring-0", rows: 3, placeholder: "e.g., rollback failed and corrupted invoices", tabindex: 1 %>
        <%= hidden_field_tag :engineer_name, "Alex Shaw", name: "engineer_name", class: "hidden" %>

        <p class="mt-3 text-xs text-center text-gray-500">
          By submitting, you agree to the
          <a href="/terms" class="text-blue-500 hover:underline">Terms</a> and
          <a href="/privacy" class="text-blue-500 hover:underline">Privacy Policy</a>
        </p>
      </div>

      <div class="text-center mt-6">
        <%= f.submit 'Start the real postmortem&nbsp;&nbsp;&rarr;'.html_safe, class: 'cursor-pointer rounded-lg px-5 py-2.5 text-lg font-semibold text-white bg-slate-600 hover:bg-slate-700 active:bg-slate-800 transition shadow-sm hover:shadow-md focus:outline-none', tabindex: 3 %>
      </div>
      <div class="mt-4 text-sm text-center text-gray-500">
        No logins. No credit cards.
      </div>
    <% end %>
  </div>

  <div class="lg:w-1/2 w-full">
    <div class="bg-white border border-gray-150 rounded-md shadow overflow-hidden text-sm">
      <div class="bg-neutral-700 text-white px-3 py-2 border-b border-neutral-150 font-medium flex justify-between items-center">
        <span>Re: The rollback didn't work</span>
        <span class="text-xs text-gray-400 font-normal">Mon, Jul 7 &bull; 9:17am</span>
      </div>

      <div class="text-gray-800">
        <div class="p-3">
          <div>
            <div class="font-medium text-gray-600">Jacob Comer</div> Imagine a hotfix gets rushed and only makes things worse. The team tries a rollback... but it doesn't behave like anyone expected. How do you know your rollback logic is actually safe?
          </div>
        </div>
        <div class="p-3 border-t border-gray-100">
          <div>
            <div class="font-medium text-gray-600">Alex Shaw</div> yeah that definitely happened once. we assumed it was safe to just revert the last commit, but it made the data mismatch worse. didn't catch it til customers complained.
          </div>
        </div>
        <div class="p-3 border-t border-gray-100">
          <div>
            <div class="font-medium text-gray-600">Jacob Comer</div> Rollback paths often aren't tested like deploys. <span class="font-medium">What would break if a background job already ran on the new data?</span>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-3">
      <div class="flex items-center gap-3 justify-end">
        <div class="text-[17px] font-semibold text-gray-900 signature pt-1.5">
          Jacob Comer
        </div>
        <div class="flex justify-center sm:justify-end gap-2 mt-2">
          <%= link_to 'https://linkedin.com/in/jacobcomer', target: "_blank" do %>
            <img src="/icons/linkedin.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="LinkedIn" />
          <% end %>
          <%= link_to 'https://instagram.com/jacob_comer', target: "_blank" do %>
            <img src="/icons/instagram.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="Instagram" />
          <% end %>
          <%= link_to 'https://jacobcomer.medium.com/write-code-faster-in-vim-c564ff9b9f6c', target: "_blank" do %>
            <img src="/icons/medium.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="Medium" />
          <% end %>
          <%= link_to 'https://www.reddit.com/user/jacob_the_snacob', target: "_blank" do %>
            <img src="/icons/reddit.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="Reddit" />
          <% end %>
          <%= link_to 'mailto:jacob@jacobcomer.com', target: "_blank" do %>
            <img src="/icons/email.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="Email" />
          <% end %>
        </div>
      </div>
      <div class="text-right mt-3 text-xs text-gray-600">
        Staff Engineer (leading IAM for a major infra/security company)
      </div>
    </div>
  </div>
</div>

<div class="pb-6">
  <div class="text-md leading-relaxed tracking-[0.008em]">
    <div class="text-[17px]">

      <div class="mt-12 max-w-[90ch] text-[17px] leading-relaxed text-gray-800 space-y-6 mb-10">
        <p>
          <span class="font-medium">replicate.info</span> helps engineers sharpen their production instincts. There's no UI. No logins. Just recurring emails that pressure test your knowledge of infra/security fundamentals. When it finds a gap, GPT sends you personalized coaching.
        </p>

        <p>
          You get dropped into the middle of an incident, and asked where you would look first. It replies with the pushback you'd get from someone five years ahead of you, calmly challenging your assumptions and pointing out what you missed.
        </p>

        <p>
          No UI. No logins. No tracking. No reports. Just a 5-minute puzzle that nudges you to an <span class="italic font-medium">"aha!"</span> moment, 52 times per year.
        </p>

        <p>
         <span class="font-medium">Think of it as consistent, bite-sized pressure</span> — It's not meant to be comfortable. It's meant to prevent your next SEV-1.
        </p>
      </div>
      <div class="mb-8 flex gap-6">
        <% EXAMPLE_EMAILS.each_with_index do |email, i| %>
          <div class="md:basis/1-2 lg:basis-1/3 bg-white border border-gray-100 shadow rounded-xl p-5 space-y-4 <%= i == 0 ? "hidden md:block" : "" %> <%= i == 1 ? "hidden lg:block" : "" %> <%= i == 2 ? "md:block" : "" %>">
            <div class="flex items-center justify-between align-middle">
              <div class="text-sm text-gray-500"><%= email[:to] %></div>
              <img src="/profile-photo-<%= i + 1 %>.jpg" alt="Avatar" class="w-10 h-10 rounded-full overflow-hidden" />
            </div>

            <div class="text-base font-semibold text-gray-900"><%= email[:subject] %></div>
            <div class="text-sm text-gray-700 leading-relaxed"><%= email[:content] %></div>

            <div>
              <a href="#" data-example="<%= email[:prompt] %>" data-name="<%= email[:to] %>" class="example-btn inline-block rounded-md border border-gray-300 bg-white text-sm text-gray-800 font-medium px-3 py-1.5 hover:bg-gray-100">
                Prevent the fire
              </a>
            </div>

            <div class="text-xs text-gray-400 pt-2">
              Sent automatically every Monday
            </div>
          </div>
        <% end %>
      </div>
      <div class="mt-10 max-w-[90ch] text-[17px] leading-relaxed text-gray-800">
        <div class="md:flex gap-8">
          <div class="md:basis-1/2 space-y-6">
            <p class="text-xl font-semibold tracking-tight">
              Next Steps
            </p>
            <p>
              Want to start next Monday? Add your work emails <a href="/demo" class="text-blue-600 hover:text-blue-700 font-medium hover:underline hover:underline-offset-4 decoration-1 transition">here</a>.
            </p>
            <p>
              Each thread introduces itself with no surprises. Engineers start with one incident per week, and a private coaching thread to dig into their growth opportunities.
            </p>
            <p>
              Want to <a href="/security" class="text-blue-600 hover:text-blue-700 font-medium hover:underline hover:underline-offset-4 decoration-1 transition">learn more</a> about user provisioning, data security, and AI usage? Purchase approvals should be quick.
            </p>
            <p>
              Hosted <span class="hidden md:inline">securely </span>on Heroku. <span class="font-semibold">No customer data.</span> Includes a lightweight admin portal for optional SCIM integration. The setup takes minutes. End-users engage via email only.
            </p>
          </div>
          <div class="mt-8 md:mt-0 md:basis-1/2 space-y-6">
            <p class="text-xl font-semibold tracking-tight">
              Pricing
            </p>
            <div class="grid gap-2 mb-8 border border-gray-200 rounded-md overflow-hidden text-sm shadow">
              <div class="grid grid-cols-2 bg-gray-100 text-gray-800 border-b border-gray-200">
                <div class="px-4 py-2 font-semibold">Team Size</div>
                <div class="px-4 py-2"><span class="font-semibold">Annual Price</span> (USD)</div>
              </div>
              <div class="grid grid-cols-2 border-b border-gray-100">
                <div class="px-4 py-2">Up to <span class="font-semibold">10</span> engineers</div>
                <div class="px-4 py-2 font-medium">$5,000</div>
              </div>
              <div class="grid grid-cols-2 border-b border-gray-100">
                <div class="px-4 py-2">Up to <span class="font-semibold">25</span> engineers</div>
                <div class="px-4 py-2 font-medium">$10,000</div>
              </div>
              <div class="grid grid-cols-2 border-b border-gray-100">
                <div class="px-4 py-2">Up to <span class="font-semibold">75</span> engineers</div>
                <div class="px-4 py-2 font-medium">$20,000</div>
              </div>
              <div class="grid grid-cols-2 border-b border-gray-100">
                <div class="px-4 py-2">Up to <span class="font-semibold">150</span> engineers</div>
                <div class="px-4 py-2 font-medium">$40,000</div>
              </div>
              <div class="grid grid-cols-2 border-b border-gray-100">
                <div class="px-4 py-2">Up to <span class="font-semibold">300</span> engineers</div>
                <div class="px-4 py-2 font-medium">$80,000</div>
              </div>
              <div class="grid grid-cols-2">
                <div class="px-4 py-2">Unlimited (org-wide)</div>
                <div class="px-4 py-2 font-medium">$100,000</div>
              </div>
              <div class="px-4 py-2 text-sm border-t border-gray-200 bg-neutral-100 md:text-center rounded-bl-md rounded-br-md">
                <span class="font-medium">One fixed invoice per year.</span> <span class="block md:inline md:mt-0">No surprise mid-cycle upgrades.</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("demo-form");

    const exampleButtons = document.querySelectorAll(".example-btn");
    const engineer_name = document.querySelector("input[name='engineer_name']");
    const textarea = document.querySelector("textarea[name='incident']");
    const exampleContainer = document.getElementById("example-buttons");

    exampleButtons.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        textarea.value = btn.dataset.example;
        engineer_name.value = btn.dataset.name;
        form.submit(); // Submit the form immediately
      });
    });
  });
</script>