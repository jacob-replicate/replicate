<div class="flex gap-6">
  <div>
    <div class="px-20 md:px-16 lg:px-28 xl:px-24 2xl:px-24 mb-6">
      <img class="w-full" src="/hero-left.jpg" />
    </div>
    <div class="text-xl font-medium">
      Uncover your engineers' blind spots
    </div>
    <div class="mb-4 text-md" >
      (before a random PR takes down production)
    </div>

    <%= form_for Conversation.new, url: conversations_path, html: { id: "demo-form" } do |f| %>
      <div class="p-3 rounded-xl bg-gray-100">
        <div class="block text-gray-900 mb-2">
          What issue blindsided you recently?
        </div>

        <%= text_area_tag :initial_message, "", class: 'block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 border border-gray-300 outline-1 -outline-offset-1 outline-indigo-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-1 focus:outline-indigo-600 sm:text-sm', rows: 3, placeholder: 'e.g., crashed DB because forgot index', tabindex: 1 %>

        <div id="terms-container" class="flex items-center gap-2 mt-4">
          <%= check_box_tag :agree, "1", false, class: 'rounded-lg border border-gray-300', id: "agree", tabindex: 2 %>
          <label for="agree" class="text-sm cursor-pointer">
            I accept the <a href="/terms" class="text-blue-500 hover:underline hover:underline-offset-8">Terms</a> and
            <a href="/privacy" class="text-blue-500 hover:underline hover:underline-offset-8">Privacy Policy</a>
          </label>
        </div>
      </div>

      <div class="text-center pt-4">
        <%= f.submit 'Generate My Demo', class: 'cursor-pointer rounded-md px-4 py-2 text-lg font-semibold text-white shadow-xs bg-slate-600 hover:bg-slate-700 active:bg-slate-700', tabindex: 3 %>
      </div>
    <% end %>
  </div>

  <div class="hidden md:block lg:pl-10">
    <img src="/email-screenshot.jpg" class="w-full rounded-lg shadow-lg" />
  </div>
</div>

<div class="mt-12 max-w-none">
  <div class="text-md leading-relaxed">
    <div class="mt-4 mb-4">
      <%= link_to 'replicate.info', 'https://replicate.info', class: "text-sky-700 hover:underline hover:underline-offset-4 font-medium", target: "_blank" %>
      helps engineering leaders bridge knowledge gaps <span class="font-semibold">before</span> they derail your roadmap.
    </div>
    <div class="mb-4">
      As a tech lead, there's always more that I want to teach my team, but never enough time. This platform gradually finds each engineer's unique growth opportunities, and sends personalized learning nudges to their inbox.
    </div>
    <div class="mb-4 md:hidden">
      <img src="/email-screenshot.jpg" class="w-full rounded-lg shadow-lg" />
    </div>
    <div class="mt-4 mb-6 text-center md:hidden">
      <span class="bg-yellow-200 px-2 py-1 inline-block"><span class="font-semibold">$30</span>/mo (USD) per user</span>
    </div>
    <div class="mb-4">
      No accounts to create. No dashboards to manage. Your engineers check-in with a curated LLM over email, click a few links, learn something impactful, and get back to their sprint work.
    </div>
    <div class="mb-4">
      Managers get weekly reports on team growth, morale trends, and risks that might justify more headcount. I've spent 15 years at B2B tech startups, and hate watching small knowledge gaps become team-wide disasters.
    </div>
  </div>

  <div class="text-md pt-4 mt-4 border-t border-gray-200 font-semibold">
    Any of these happen to you recently?
  </div>

  <div class="">
    <div class="mt-2" id="example-buttons">
      <a href="#" data-example="senior engineer quit, no handoff plan in place" class="example-btn inline-block mr-3 mb-3 sm:mb-0 rounded-md px-3 py-1 text-md text-zinc-700 shadow-xs bg-slate-200 hover:bg-slate-300 active:bg-slate-300">ğŸšª Key Engineer Quit</a>
      <a href="#" data-example="critical prod outage traced to config drift" class="example-btn inline-block mr-3 mb-3 sm:mb-0 rounded-md px-3 py-1 text-md text-zinc-700 shadow-xs bg-slate-200 hover:bg-slate-300 active:bg-slate-300">ğŸ’¥ Prod Outage</a>
      <a href="#" data-example="missed deadline, had to cut major scope" class="example-btn inline-block mr-3 mb-3 sm:mb-0 rounded-md px-3 py-1 text-md text-zinc-700 shadow-xs bg-slate-200 hover:bg-slate-300 active:bg-slate-300">ğŸ¢ Missed Deadline</a>
      <a href="#" data-example="PM expected one thing, team built another" class="example-btn inline-block mr-3 mb-3 sm:mb-0 rounded-md px-3 py-1 text-md text-zinc-700 shadow-xs bg-slate-200 hover:bg-slate-300 active:bg-slate-300">ğŸª¤ Misaligned Expectations</a>
    </div>
  </div>

  <div class="flex items-center gap-5 justify-end mt-10 not-prose">
    <div style="padding-top: 4px">
      <img src="/jacob.jpg" style="width: 70px" class="rounded-full mb-2" />
    </div>
    <div>
      <div class="text-md mb-1.5" style="font-family: 'Homemade Apple'">Jacob Comer</div>
      <div class="flex gap-1.5">
        <%= link_to 'https://instagram.com/jacob_comer', target: "_blank" do %>
          <img src="/icons/instagram.png" style="width: 25px" />
        <% end %>
        <%= link_to 'https://linkedin.com/in/jacobcomer', target: "_blank" do %>
          <img src="/icons/linkedin.png" style="width: 25px" />
        <% end %>
        <%= link_to 'https://jacobcomer.medium.com/write-code-faster-in-vim-c564ff9b9f6c', target: "_blank" do %>
          <img src="/icons/medium.png" style="width: 25px" />
        <% end %>
        <%= link_to 'https://www.reddit.com/user/jacob_the_snacob', target: "_blank" do %>
          <img src="/icons/reddit.png" style="width: 25px" />
        <% end %>
        <%= link_to 'mailto:jacob@jacobcomer.com', target: "_blank" do %>
          <img src="/icons/email.png" style="width: 25px" />
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("demo-form");
    const agree = document.getElementById("agree");

    form.addEventListener("submit", (e) => {
      if (!agree.checked) {
        e.preventDefault();
        alert("You must agree to the Terms and Privacy Policy.");
      }
    });

    const exampleButtons = document.querySelectorAll(".example-btn");
    const textarea = document.querySelector("textarea[name='initial_message']");
    const exampleContainer = document.getElementById("example-buttons");

    exampleButtons.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        textarea.value = btn.dataset.example;
        textarea.focus();
        exampleContainer.remove(); // removes the entire div block
        termsContainer = document.getElementById("terms-container");
        termsContainer.style.display = "none";
        form.submit(); // Submit the form immediately
      });
    });
  });
</script>