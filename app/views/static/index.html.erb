<div class="flex flex-col lg:flex-row gap-9 md:pt-10">
  <!-- Left Column: Headline + Form -->
  <div class="lg:w-1/2 w-full">
    <h1 class="text-2xl lg:text-3xl font-semibold tracking-tight mb-2">
      Your next outage is avoidable.
    </h1>
    <p class="text-gray-800 mb-6 leading-relaxed text-[17px]">
      Coaching lands in your email every Monday, helping you fix blind spots before they turn into incidents.
    </p>

    <%= form_for Conversation.new, url: conversations_path, html: { id: "demo-form" } do |f| %>
      <div class="p-4 rounded-xl bg-white shadow-sm" style="border: 1px solid #e6e6e6">
        <label for="initial_message" class="block text-gray-900 font-medium">
          What went sideways in production recently?
        </label>
        <div class="text-sm text-indigo-600 mt-1 mb-2">
          Here's how the system would coach you through it.
        </div>

        <%= text_area_tag :initial_message, "", class: 'w-full rounded-md bg-white px-4 py-2 text-sm text-gray-900 border border-gray-300 focus:border-indigo-600 focus:ring-0 placeholder:text-gray-400', rows: 3, placeholder: 'e.g., latency spike after a config change', tabindex: 1 %>
        <div class="mt-3 text-xs text-gray-500 text-center">
          By submitting, you agree to the <a href="/terms" class="text-blue-500 hover:underline">Terms</a> and <a href="/privacy" class="text-blue-500 hover:underline">Privacy Policy</a>
        </div>
      </div>

      <div class="text-center mt-6">
        <%= f.submit 'See the coaching thread&nbsp;&nbsp;&rarr;'.html_safe, class: 'cursor-pointer rounded-lg px-5 py-2.5 text-lg font-semibold text-white bg-slate-600 hover:bg-slate-700 active:bg-slate-800 transition shadow-sm hover:shadow-md focus:outline-none', tabindex: 3 %>
      </div>
      <div class="mt-4 text-sm text-center text-gray-500">
        No logins. No credit cards.
      </div>
    <% end %>
  </div>

  <!-- Right Column: Email Visual -->
  <div class="lg:w-1/2 w-full">
    <div class="bg-white border border-gray-200 rounded-xl shadow overflow-hidden text-sm">
      <!-- Header: Subject line + pseudo timestamp -->
      <div class="bg-gray-100 text-gray-700 px-4 py-2 border-b border-gray-200 font-medium flex justify-between items-center">
        <span>Re: The rollback didn't work</span>
        <span class="text-xs text-gray-500 font-normal">Mon, Jul 7 &bull; 9:17am</span>
      </div>

      <!-- Thread body -->
      <div class="p-4 space-y-6 text-gray-800">
        <div class="flex gap-2">
          <div>
            <span class="font-bold">Jacob:</span> Imagine a hotfix gets rushed and only makes things worse. The team tries a rollback... but it doesn't behave like anyone expected. <span class="font-semibold">How do you know your rollback logic is actually safe?</span>
          </div>
        </div>
        <div class="flex gap-2">
          <div>
            <span class="font-bold">Alex:</span> yeah that definitely happened once. we assumed it was safe to just revert the last commit, but it made the data mismatch worse. didn't catch it til customers complained.
          </div>
        </div>
        <div class="flex gap-2">
          <div>
            <span class="font-bold">Jacob:</span> That's a super common trap â€” especially if the rollback path isn't tested the same way as the deploy path. <span class="font-semibold">What would break if a background job had already run on the new data?</span>
          </div>
        </div>
      </div>

      <!-- Footer: Sending note -->
      <div class="px-4 py-3 border-t border-gray-100 bg-gray-50 text-xs text-gray-500 flex justify-end items-center">
        Sent automatically every Monday
      </div>
    </div>

    <div class="mt-4">
      <div class="flex items-center gap-3 justify-end">
        <div class="text-[17px] font-semibold text-gray-900 signature pt-1.5">
          Jacob Comer
        </div>
        <div class="flex justify-center sm:justify-end gap-2 mt-2">
          <%= link_to 'https://linkedin.com/in/jacobcomer', target: "_blank" do %>
            <img src="/icons/linkedin.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="LinkedIn" />
          <% end %>
          <%= link_to 'https://instagram.com/jacob_comer', target: "_blank" do %>
            <img src="/icons/instagram.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="Instagram" />
          <% end %>
          <%= link_to 'https://jacobcomer.medium.com/write-code-faster-in-vim-c564ff9b9f6c', target: "_blank" do %>
            <img src="/icons/medium.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="Medium" />
          <% end %>
          <%= link_to 'https://www.reddit.com/user/jacob_the_snacob', target: "_blank" do %>
            <img src="/icons/reddit.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="Reddit" />
          <% end %>
          <%= link_to 'mailto:jacob@jacobcomer.com', target: "_blank" do %>
            <img src="/icons/email.png" class="w-6 h-6 opacity-90 hover:opacity-100 transition" alt="Email" />
          <% end %>
        </div>
      </div>
      <div class="mt-3 text-right text-sm">
        Launched August 2025 &bull; 600 hours invested (so far)
      </div>
    </div>
  </div>
</div>

<div class="pb-6 mt-10 lg:mt-14">
  <div class="text-md leading-relaxed tracking-[0.008em]">
    <div class="text-[17px]">

      <div class="mt-16 max-w-[90ch] text-[17px] leading-relaxed text-gray-800 space-y-6 mb-10">
        <p>
          <span class="font-medium">replicate.info</span> helps mid/senior-level engineers at tech startups sharpen their production instincts. It sends short coaching emails about the <a href="/knowledge-gaps" class="text-blue-600 hover:text-blue-700 font-medium hover:underline hover:underline-offset-4 decoration-1 transition" target="_blank">blind spots</a> that page you at 3:00am. Built by a Staff Engineer who works on Terraform.
        </p>

        <p>
          No UI. No logins. No dashboards. Just a 5-minute puzzle that nudges you toward an <span class="italic font-medium">"aha!"</span> moment, 52 times per year. Think of it as structured, bite-sized pressure â€” helping engineers confront risks before they surface in production.
        </p>

        <p>
          Every email describes a real incident and asks where you'd look first. Then GPT replies with the pushback you'd get from someone five years ahead of you, challenging your assumptions and pointing out what you missed.
        </p>
      </div>
      <div class="mb-1 text-xl font-medium">
        Most postmortems never need to happen.
      </div>
      <div class="mb-4 text-sm">
        Trained of 15 years of startup experience, these threads feel like a thoughtful note from your tech lead, not a chatbot.
      </div>
      <div class="mb-10 flex gap-4">
        <% EXAMPLE_EMAILS.each_with_index do |email, i| %>
          <div class="bg-white border border-gray-200 shadow rounded-xl p-5 space-y-4 <%= i == 0 ? "hidden md:block" : "" %> <%= i == 1 ? "hidden lg:block" : "" %> <%= i == 2 ? "md:block" : "" %>">
            <div class="flex items-center justify-between align-middle">
              <div class="text-sm text-gray-500"><%= email[:to] %></div>
              <img src="/profile-photo-<%= i + 1 %>.jpg" alt="Avatar" class="w-10 h-10 rounded-full overflow-hidden" />
            </div>

            <div class="text-base font-semibold text-gray-900"><%= email[:subject] %></div>
            <div class="text-sm text-gray-700 leading-relaxed"><%= email[:content] %></div>

            <div>
              <a href="#" data-example="<%= email[:prompt] %>" class="example-btn inline-block rounded-md border border-gray-300 bg-white text-sm text-gray-800 font-medium px-3 py-1.5 hover:bg-gray-100">
                See how it played out
              </a>
            </div>

            <div class="text-xs text-gray-400 pt-2">
              Sent automatically every Monday
            </div>
          </div>
        <% end %>
      </div>
      <div class="mt-8 max-w-[90ch] text-[17px] leading-relaxed text-gray-800 space-y-6">
        <p>
          Threads apply broadly, regardless of your tech stack, covering failures common to platform, SRE, and full-stack teams.
        </p>
        <p>
          Want to start next Monday? Just paste your team's emails <a href="/demo" class="text-blue-600 hover:text-blue-700 font-medium hover:underline hover:underline-offset-4 decoration-1 transition">here</a>. Each thread introduces itself with no surprises. Engineers get one private email per week, with a realistic scenario to engage with. The core idea will stick, even if they don't reply.
        </p>
        <p>
          <span class="font-semibold">$30</span> user/mo* (USD) for a team that ships with clarity. I'd offer annual pricing, but I doubt you'll still need me in a year. ðŸ˜‰
        </p>
        <p>
          <a href="/query-spike" class="inline-block rounded-md bg-neutral-700 px-4 py-2 text-white text-base font-semibold shadow hover:bg-neutral-700 transition">
            Solve your first puzzle&nbsp;&nbsp;&rarr;
          </a>
        </p>

        <div class="text-sm text-gray-500">
          * Inactive users are automatically paused, and dropped from the current month's invoice.
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("demo-form");

    const exampleButtons = document.querySelectorAll(".example-btn");
    const textarea = document.querySelector("textarea[name='initial_message']");
    const exampleContainer = document.getElementById("example-buttons");

    exampleButtons.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        textarea.value = btn.dataset.example;
        form.submit(); // Submit the form immediately
      });
    });
  });
</script>