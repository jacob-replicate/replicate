<div class="flex flex-col-reverse lg:flex-row gap-8 md:pt-10">
  <!-- Left Column: Headline + Form -->
  <div class="lg:w-1/2 w-full">
    <h1 class="text-2xl md:text-3xl font-bold tracking-tight mb-3">
      Raise the bar, before it breaks.
    </h1>
    <p class="text-gray-800 mb-6 leading-relaxed text-[17px]">
      Tailored coaching delivered straight to your engineers' inboxes. No logins.<span class="hidden md:inline"> No dashboards.</span> No extra work.
    </p>

    <%= form_for Conversation.new, url: conversations_path, html: { id: "demo-form" } do |f| %>
      <div class="p-4 rounded-xl bg-gray-50 shadow-sm border border-gray-200">
        <label for="initial_message" class="block text-gray-900 font-medium">
          What issue disrupted your team recently?
        </label>
        <div class="text-sm text-indigo-600 mt-1 mb-2">
          Preview a check-in that might have prevented the incident.
        </div>

        <%= text_area_tag :initial_message, "", class: 'w-full rounded-md bg-white px-4 py-2 text-sm text-gray-900 border border-gray-300 focus:border-indigo-600 focus:ring-0 placeholder:text-gray-400', rows: 3, placeholder: 'e.g., missed regression during PR review', tabindex: 1 %>
        <div class="mt-3 text-xs text-gray-500 text-center">
          By submitting, you agree to the <a href="/terms" class="text-blue-500 hover:underline">Terms</a> and <a href="/privacy" class="text-blue-500 hover:underline">Privacy Policy</a>
        </div>
      </div>

      <div class="text-center mt-6">
        <%= f.submit 'Debug the root cause &rarr;'.html_safe, class: 'cursor-pointer rounded-lg px-5 py-2.5 text-lg font-semibold text-white bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 transition shadow-sm hover:shadow-md focus:outline-none', tabindex: 3 %>
      </div>
    <% end %>
  </div>

  <!-- Right Column: Hero Image -->
  <div class="lg:w-1/2 w-full">
    <img src="/hero.jpg" alt="Developers at work" class="w-full rounded-xl shadow-md" />
  </div>
</div>

<div class="pb-6 md:pb-0 mt-10 lg:mt-14">
  <div class="text-md leading-relaxed tracking-[0.008em]">
    <div class="text-[17px]">

      <div class="mt-16 max-w-[90ch] text-[17px] leading-relaxed text-gray-800 space-y-6 mb-8">
        <p>
          I spent 15 years of <%= link_to 'my career', 'https://linkedin.com/in/jacobcomer', target: "_blank", class: "text-sky-700 hover:text-sky-900 hover:font-medium underline underline-offset-[6px]" %> at B2B startups, and hate watching small blind spots turn into production incidents.
        </p>

        <!-- Mobile-friendly version -->
        <div class="block md:hidden space-y-4">
          <p><span class="font-semibold">replicate.info</span> is for EM's who want to help their teams level up with modern tech, but don't have time to manage another SaaS tool.</p>
          <p>I fed a list of <a href="/knowledge-gaps" class="text-sky-700 underline underline-offset-[6px] hover:font-medium" target="_blank">knowledge gaps</a> that can tank your sprint into an LLM. It emails your engineers every Monday, and helps them find impactful areas to work on next. </p>
        </div>

        <!-- Desktop version -->
        <p class="hidden md:block">
          <span class="font-semibold">replicate.info</span> is for EM's who want to help their teams level up with modern tech, but don't have time to manage another SaaS tool. I fed a list of <a href="/knowledge-gaps" class="text-sky-700 underline underline-offset-[6px] hover:font-medium" target="_blank">knowledge gaps</a> that can tank your sprint into an LLM. It emails your engineers every Monday, and helps them consistently find impactful areas to work on next. No logins. No extra work required from you.
        </p>
      </div>
      <div class="mb-6 flex gap-4">
        <% EXAMPLE_EMAILS.each_with_index do |email, i| %>
          <div class="bg-white border border-gray-200 shadow rounded-xl p-5 space-y-4 md:block <%= i > 0 ? "hidden" : "" %>">
            <div class="flex items-center justify-between align-middle">
              <div class="text-sm text-gray-500"><%= email[:to] %></div>
              <img src="/profile-photo-<%= i + 1 %>.jpg" alt="Avatar" class="w-10 h-10 rounded-full overflow-hidden" />
            </div>

            <div class="text-base font-semibold text-gray-900"><%= email[:subject] %></div>
            <div class="text-sm text-gray-700 leading-relaxed"><%= email[:content] %></div>

            <div>
              <a href="#" data-example="<%= email[:prompt] %>" class="example-btn inline-block rounded-md border border-gray-300 bg-white text-sm text-gray-800 font-medium px-3 py-1.5 hover:bg-gray-100">
                Read the full coaching thread
              </a>
            </div>

            <div class="text-xs text-gray-400 pt-2">
              Sent automatically every Monday
            </div>
          </div>
        <% end %>
      </div>
      <div class="mt-8 max-w-[90ch] text-[17px] leading-relaxed text-gray-800 space-y-6 mb-8">
        <p>
          <span class="font-semibold">$30</span> user/mo (USD). 1-month trial. No setup. Just <a href="#" data-example="enabled a feature flag 2 weeks early in production" class="example-btn text-sky-700 underline-offset-[6px] underline">send over</a> your team’s emails. Everything else is taken care of.
        </p>
        <p>
          Every Friday, you get a clear view of team growth, morale trends, and delivery risk — in one email.
        </p>
      </div>
    </div>
  </div>

  <div class="flex items-center gap-5 justify-end mt-6">
    <div style="padding-top: 4px">
      <img src="/jacob.jpg" style="width: 70px" class="rounded-full mb-2" />
    </div>
    <div>
      <div class="text-md mb-1.5 pl-1" style="font-family: 'Homemade Apple'">Jacob Comer</div>
      <div class="flex gap-1.5">
        <%= link_to 'https://instagram.com/jacob_comer', target: "_blank" do %>
          <img src="/icons/instagram.png" style="width: 28px" />
        <% end %>
        <%= link_to 'https://linkedin.com/in/jacobcomer', target: "_blank" do %>
          <img src="/icons/linkedin.png" style="width: 28px" />
        <% end %>
        <%= link_to 'https://jacobcomer.medium.com/write-code-faster-in-vim-c564ff9b9f6c', target: "_blank" do %>
          <img src="/icons/medium.png" style="width: 28px" />
        <% end %>
        <%= link_to 'https://www.reddit.com/user/jacob_the_snacob', target: "_blank" do %>
          <img src="/icons/reddit.png" style="width: 28px" />
        <% end %>
        <%= link_to 'mailto:jacob@jacobcomer.com', target: "_blank" do %>
          <img src="/icons/email.png" style="width: 28px" />
        <% end %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("demo-form");

    const exampleButtons = document.querySelectorAll(".example-btn");
    const textarea = document.querySelector("textarea[name='initial_message']");
    const exampleContainer = document.getElementById("example-buttons");

    exampleButtons.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        textarea.value = btn.dataset.example;
        form.submit(); // Submit the form immediately
      });
    });
  });
</script>