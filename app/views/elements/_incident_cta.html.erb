<% title = element.context["title"] %>
<% body  = element.context["body"] %>
<% signals = element.context["signals"] || [] %>
<% list_mode = local_assigns[:list_mode] %>

<div class="<%= list_mode ? 'rounded-lg overflow-hidden border border-zinc-700 dark:border-zinc-600' : 'mt-6 rounded-lg overflow-hidden border border-zinc-700 dark:border-zinc-600' %>">
  <!-- Slack-style channel header -->
  <div class="px-4 py-2.5 bg-zinc-800 dark:bg-zinc-800 border-b border-zinc-700 dark:border-zinc-600 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <span class="text-red-400 text-lg font-semibold">#</span>
      <span class="text-zinc-100 font-semibold text-sm">inc-<%= rand(1000..8000) %>-<%= title.parameterize.truncate(25, omission: '', separator: '-') %></span>
      <span class="text-xs bg-red-500/20 text-red-400 px-1.5 py-0.5 rounded font-medium">SEV-1</span>
    </div>
    <a href="<%= element_path(element) %>"
       class="inline-flex items-center rounded-md bg-zinc-600 dark:bg-zinc-600 px-3 py-1 text-[13px] font-semibold text-zinc-100 hover:bg-zinc-500 dark:hover:bg-zinc-500">
      Intervene
    </a>
  </div>

  <!-- Incident body -->
  <div class="p-4 bg-zinc-900 dark:bg-zinc-900">
    <div class="text-zinc-200 text-sm leading-relaxed mb-4">
      <%= body %>
    </div>

    <% if signals.any? %>
      <div class="space-y-1.5 font-mono text-xs">
        <% signals.each do |signal| %>
          <div class="flex items-start gap-2">
            <span class="text-zinc-500 select-none">â€º</span>
            <span class="text-zinc-400"><%= signal %></span>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>