<% author  = element.context["author"] || "Teammate" %>
<% avatar  = element.context["avatar"] || "/jacob.jpg" %>
<% title   = element.context["title"] %>
<% subtitle = element.context["subtitle"] %>
<% placeholder = element.context["input_placeholder"] %>
<% list_mode = local_assigns[:list_mode] %>

<div class="<%= list_mode ? 'px-5 py-4 bg-white dark:bg-zinc-800' : 'mt-6 rounded-md border-[1.5px] border-[#b0b0b0] dark:border-[#333333] bg-white dark:bg-zinc-800 px-5 py-4 relative' %>">
  <% unless list_mode %>
    <div class="absolute left-0 top-0 h-full w-1 rounded-l-md bg-violet-400 dark:bg-violet-500/70"></div>
  <% end %>

  <div class="flex items-start gap-3">
    <img
      src="<%= avatar %>"
      alt="Author avatar"
      class="h-9 w-9 rounded-full object-cover mt-[2px]"
      />

    <div class="flex-1">
      <div class="text-[15px] text-zinc-800 dark:text-zinc-100">
        <span class="font-medium">Design Review:</span> <%= title %>
      </div>

      <% if subtitle.present? %>
        <div class="mt-0.5 text-sm text-zinc-500 dark:text-zinc-400">
          <%= subtitle %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="mt-4 text-[16px] text-zinc-700 dark:text-zinc-200 leading-relaxed space-y-3">
    <%= element.context["body"].html_safe %>
  </div>

  <%= form_with url: element_path(element), method: :get, local: true, class: "mt-5" do |f| %>
    <div class="flex gap-2">
      <input
        name="initial_message"
        type="text"
        placeholder="<%= placeholder %>"
        class="flex-1 rounded-md border border-zinc-200 dark:border-zinc-600 bg-white dark:bg-zinc-700/50 px-3 py-2 text-sm text-zinc-800 dark:text-zinc-200
               placeholder:text-zinc-400 dark:placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-violet-500 dark:focus:ring-violet-400
               focus:border-violet-500 dark:focus:border-violet-400"
        />
      <button type="submit" class="rounded-md bg-slate-700 dark:bg-slate-600 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800 dark:hover:bg-slate-500">
        Start Review
      </button>
    </div>
  <% end %>
</div>