<% title    = element.context["title"] %>
<% subtitle = element.context["subtitle"] %>
<% options  = element.elements.order(:sort_order) %>
<% list_mode = local_assigns[:list_mode] %>

<% two_up = options.length == 2 %>

<%
  ctas = [
    "Test that assumption →",
    "Follow this reasoning →",
    "See if the logic holds →"
  ]
%>

<div class="<%= list_mode ? 'px-5 py-4 bg-white dark:bg-zinc-800' : 'mt-6 rounded-md border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 px-5 py-4 relative' %>">
  <div class="text-[15px] font-medium text-zinc-900 dark:text-zinc-100">
    <%= title %>
  </div>

  <% if subtitle.present? %>
    <div class="mt-0.5 text-sm text-zinc-500 dark:text-zinc-400">
      <%= subtitle %>
    </div>
  <% end %>

  <%
    # Neutral background colors - no red/green to avoid yes/no implications
    card_colors = [
      "bg-teal-50 dark:bg-teal-900/40 border-teal-300 dark:border-teal-600/60 hover:bg-teal-100 dark:hover:bg-teal-900/50",
      "bg-amber-50/70 dark:bg-amber-900/20 border-amber-200/60 dark:border-amber-700/40 hover:bg-amber-100/80 dark:hover:bg-amber-900/30",
      "bg-indigo-50 dark:bg-indigo-900/30 border-indigo-200 dark:border-indigo-700/50 hover:bg-indigo-100 dark:hover:bg-indigo-900/40"
    ]
    accent_colors = [
      "bg-teal-500 dark:bg-teal-400 group-hover:bg-teal-600 dark:group-hover:bg-teal-300",
      "bg-amber-400/70 dark:bg-amber-500/60 group-hover:bg-amber-500 dark:group-hover:bg-amber-400/80",
      "bg-indigo-400/70 dark:bg-indigo-500/60 group-hover:bg-indigo-500 dark:group-hover:bg-indigo-400/80"
    ]
  %>

  <div class="mt-4 grid gap-3 <%= two_up ? 'grid-cols-1 sm:grid-cols-2' : 'grid-cols-1' %>">
    <% options.each_with_index do |opt, idx| %>
      <% cta = ctas[idx % ctas.length] %>
      <% card_color = card_colors[idx % card_colors.length] %>
      <% accent_color = accent_colors[idx % accent_colors.length] %>

      <a href="<%= element_path(opt) %>"
         class="group relative rounded-md border
                <%= card_color %>
                px-4 py-3 shadow-sm
                hover:shadow-md">

        <!-- accent rail -->
        <div class="absolute left-0 top-0 h-full w-1 rounded-l-md <%= accent_color %>"></div>

        <div class="text-sm font-semibold text-zinc-800 dark:text-zinc-100">
          <%= opt.context["title"] %>
        </div>

        <% if opt.context["body"].present? %>
          <div class="mt-1 text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed">
            <%= opt.context["body"] %>
          </div>
        <% end %>

        <div class="mt-2 text-sm font-medium text-[#0066cc] dark:text-[#5fa8ff] group-hover:text-[#004499] dark:group-hover:text-[#8fc5ff]">
          <%= cta %>
        </div>
      </a>
    <% end %>
  </div>
</div>