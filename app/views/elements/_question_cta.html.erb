<% title    = element.context["title"] %>
<% subtitle = element.context["subtitle"] %>
<% options  = element.elements.order(:sort_order) %>
<% list_mode = local_assigns[:list_mode] %>

<% two_up = options.length == 2 %>

<%
  ctas = [
    "Test that assumption →",
    "Follow this reasoning →",
    "See if the logic holds →"
  ]
%>

<div class="<%= list_mode ? 'px-5 py-4 bg-white dark:bg-zinc-800' : 'mt-6 rounded-md border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 px-5 py-4 relative' %>">
  <div class="text-[15px] font-medium text-zinc-900 dark:text-zinc-100">
    <%= title %>
  </div>

  <% if subtitle.present? %>
    <div class="mt-0.5 text-sm text-zinc-500 dark:text-zinc-400">
      <%= subtitle %>
    </div>
  <% end %>

  <%
    # Navy / Slate with indigo hover
    card_style = "bg-slate-100 dark:bg-slate-800/50 border-slate-300 dark:border-slate-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:border-indigo-300 dark:hover:border-indigo-500"
    accent_style = "bg-indigo-400 dark:bg-indigo-500 group-hover:bg-indigo-500 dark:group-hover:bg-indigo-400"
  %>

  <div class="mt-4 grid gap-3 <%= two_up ? 'grid-cols-1 sm:grid-cols-2' : 'grid-cols-1' %>">
    <% options.each_with_index do |opt, idx| %>
      <% cta = ctas[idx % ctas.length] %>

      <a href="<%= element_path(opt) %>"
         class="group relative rounded-md border
                <%= card_style %>
                px-4 py-3 shadow-sm
                hover:shadow-md">

        <!-- accent rail -->
        <div class="absolute left-0 top-0 h-full w-1 rounded-l-md <%= accent_style %>"></div>

        <div class="text-sm font-semibold text-zinc-800 dark:text-zinc-100">
          <%= opt.context["title"] %>
        </div>

        <% if opt.context["body"].present? %>
          <div class="mt-1 text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed">
            <%= opt.context["body"] %>
          </div>
        <% end %>

        <div class="mt-2 text-sm font-medium text-[#0066cc] dark:text-[#5fa8ff] group-hover:text-[#004499] dark:group-hover:text-[#8fc5ff]">
          <%= cta %>
        </div>
      </a>
    <% end %>
  </div>
</div>